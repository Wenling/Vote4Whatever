<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link media="screen" rel="stylesheet" href="/css/bootstrap.min.css" />
            <link type="text/css" rel="stylesheet" href="/css/bootstrap-responsive.min.css" />
            <link rel="stylesheet" href="/css/docs.css" />
            <script src="http://code.jquery.com/jquery-latest.js"></script>
            <script type="text/javascript" src="/js/bootstrap.min.js"></script>
            </head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <a class="brand" href="#">Home</a>
                <ul class="nav">
                    <li class="active"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><b>{{ username }}</b><b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a tabindex="-1" href="/?category=a">View Category</a></li>
                            <li class="divider"></li>
                            <li><a tabindex="-1" href="/">Return Home</a></li>
                        </ul>
                    </li>
                    {% if username %}
                    <li><a href="/?vote_cat=all">Vote</a></li>
                    <li><a href="/?stats">Voting Stats</a></li>
                    {% endif %}
                    <li><a href="{{ url }}">{{ url_linktext }}</a></li>
                </ul>
            </div>
        </div>
        <header class="jumbotron subhead">
            <div class="container">
                <h2>Vote 4 Whatever <small>Vote without thinking.</small></h2>
            </div>
        </header>
        <div class="container">
            {% if vote_cat %}
            <div class="row">
                <div class="span9">
                    <table class="table table-hover" id="Items">
                        <thead>
                            <th></th><th>Name</th><th>Owner</th><th>Create Time</th><th>Expiration Time</th>
                        </thead>
                        <!--{% if categories %}<tr><td span=4>aaa</td></tr>{% endif %} -->
                        {% for cat in vote_cat %}
                        {% if cat.name %}
                        <tr><td><a href="/?vote_cat={{ cat.name }}&owner={{cat.owner_id}}">Vote</a></td><td>{{ cat.name }}</td><td>{{ cat.owner }}</td><td>{{ cat.create_time }}</td><td>{{ cat.expiration_time }}</td></tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                </div>
            </div>
            {% elif vote %}
            <div class="row">
                <div class="span9">
                    <div class="row">
                        <div class="span1"></div>
                        <ul class="thumbnails">
                            <li class="span4" style="background-color:#f8f8f8;">
                                <div class="thumbnail">
                                    <img src="/images/ny.jpg" data-src="holder.js/300x300" alt="" style="width: 300px; height: 300px;">
                                        <div class="caption">
                                            <h3><center>{{vote[0].name}}</center></h3>
                                            <br/>
                                            <center>
                                                <a href="/vote?item_name={{vote[0].name}}&cat_name={{cat}}&owner={{owner}}&unvote_item={{vote[1].name}}" class="btn btn-primary">Vote</a>
                                                <a href="/vote?not_skip=2&skip_item={{vote[0].name}}&cat_name={{cat}}&owner={{owner}}&item={{vote[1].name}}" class="btn">Skip</a>
                                            </center>
                                        </div>
                                        </div>
                            </li>
                            <li class="span4" style="background-color:#f8f8f8;">
                                <div class="thumbnail">
                                    <img src="/images/ny.jpg" data-src="holder.js/300x300" alt="" style="width: 300px; height: 300px;">
                                        <div class="caption">
                                            <h3><center>{{vote[1].name}}</center></h3>
                                            <br/>
                                            <center>
                                                <a href="/vote?item_name={{vote[1].name}}&cat_name={{cat}}&owner={{owner}}&unvote_item={{vote[0].name}}" class="btn btn-primary">Vote</a>
                                                <a href="/vote?not_skip=1&item={{vote[0].name}}&cat_name={{cat}}&owner={{owner}}&skip_item={{vote[1].name}}" class="btn">Skip</a>
                                            </center>
                                        </div>
                                        </div>
                            </li>
                            
                        </ul>
                        
                    </div>
                </div>
                <div class="span8 offset1">
                    <div class="alert alert-block">
                        <center><h3><a href="/?stats_cat={{cat}}&owner={{owner}}">See how others vote</a></h3></center>
                    </div>
                </div>
            </div>
            {% elif categories %}
            <div class="row">
                <div class="span4">
                    <form action="/addCat" method="post">
                        <legend>Category Name:<input type="text" name="cat_name"></legend>
                        <legend>Expiration Time: <input type="text" name="expiration_time"></legend>
                        <input class="btn btn-primary" type="submit" value="Add Category">
                            <input class="btn" type="reset" value="Reset">
                                
                                </form>
                </div>
                <div class="span5">
                    <table class="table table-hover" id="Items">
                        <thead>
                            <th></th><th>Name</th><th>Create Time</th><th>Expiration Time</th>
                        </thead>
                        <!--{% if categories %}<tr><td span=4>aaa</td></tr>{% endif %} -->
                        {% for cat in categories %}
                        {% if cat.name %}
                        <tr><td><a href="/?cat_name={{cat.name}}&owner={{cat.owner_id}}">Edit</a></td><td>{{ cat.name }}</td><td>{{ cat.create_time }}</td><td>{{ cat.expiration_time }}</td></tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                </div>
            </div>
            {% elif items %}
            <div class="row">
                <div class="span3">
                    <form action="/addItem" method="post">
                        <legend>Item Name:<input type="text" name="item_name"></legend>
                        <legend>Image: <input type="file" name="picture"></legend>
                        <input type="hidden" name = 'cat_name' value={{ cat_name }}>
                        <input type="hidden" name = 'owner' value={{ owner }}>
                            <input class="btn btn-primary" type="submit" value="Add Item">
                                <input class="btn" type="reset" value="Reset">
                                    
                                    </form>
                </div>
                <div class="span6">
                    <table class="table table-hover" id="Items">
                        <thead>
                            <th></th><th></th><th>Image</th><th>Name</th><th>Create Time</th>
                        </thead>
                        <!-- {% if items %}<tr><td span=4>aaa</td></tr>{% endif %} -->
                        {% for item in items %}
                        {% if item.name %}
                        <tr><td>
                            {% if user_id == owner %}
                            <a href='/?remove_item={{item.name}}&owner={{owner}}&parent={{cat_name}}'>Remove</a></td><td>
                            {% endif %}
                            <a href='/?item_name={{item.name}}&owner={{owner}}&parent={{cat_name}}'>View</a>                            
                        </td><td>{{item.picture}}</td><td>{{ item.name }}</td><td>{{ item.create_time }}</td></tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                </div>
            </div>
            {% elif item %}
            <div class="row">
                <div class="span4">
                    <form action="/addItem" method="post">
                        <legend><textarea name="content" rows="3" cols="60"></textarea></legend>
                        <input type="hidden" name = 'cat_name' value={{ cat_name }}>
                        <input type="hidden" name = 'item_name' value={{ item.name }}>
                        <input class="btn btn-primary" type="submit" value="Comment">
                        <input class="btn" type="reset" value="Reset">
                                    
                    </form>
                </div>
                <div class="span5">
                    <table class="table table-hover" id="Items">
                        <thead>
                            <th>Image</th><th>Name</th><th>Create Time</th>
                        </thead>
                        <!-- {% if items %}<tr><td span=4>aaa</td></tr>{% endif %} -->
                        {% for item in item %}
                        {% if item.name %}
                        <tr><td>{{item.picture}}</td><td>{{ item.name }}</td><td>{{ item.create_time }}</td></tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                </div>
                <!-- show comments here -->
            </div>
            {% elif results %}
            <div class="row">
                <table class="table table-hover" id="Results">
                    <caption></caption>
                    <thead>
                        <tr><th>Name</th><th>Win</th><th>Lose</th><th>Percentage</th></tr>
                    </thead>
                    <tbody>
                        {% for name in results %}
                        {% if name %}
                        <tr>
                            <td>{{name[0]}}</td><td>{{name[1][0]}}</td><td>{{name[1][1]}}</td><td>{{name[1][2]}}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                        
                        {% for name in unvoted %}
                        {% if unvoted[name] %}
                        <tr>
                            <td>{{name}}</td><td>{{unvoted[name][0]}}</td><td>{{unvoted[name][1]}}</td><td>{{unvoted[name][2]}}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% else %}
        <div class="row">
            <div class="span6 offset3">
                <div class="hero-unit">
                    <h1>Vote.Simplicity.</h1>
                    <p></p>
                    <p class="alert alert-info">This function right now is unfortunately unavaible.</p>
                    {% if not username %}
                    <a class="btn btn-primary btn-large" href="{{ url }}">
                        Login
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        
        <footer class="footer">
            <div class="container">
                <ul class="footer-links">
                    <li><a href="http://1010ling.blogspot.com">Blog</a></li>
                    <li class="muted">·</li>
                    <li><a href="http://www.linkedin.com/profile/view?id=140036254">LinkedIn</a></li>
                </ul>
            </div>
        </footer>
        
    </body>
</html>